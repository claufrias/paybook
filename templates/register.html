<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RedCajeros - Registro</title>
    
    <!-- Bootstrap 5 Dark -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-dark-5@1.1.3/dist/css/bootstrap-night.min.css" rel="stylesheet">
    
    <!-- Google Material Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Nuestro CSS personalizado -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="auth-page">
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="story-circle mb-4 pulse" style="width: 80px; height: 80px; border: none;">
                <i class="hugeicons hugeicons-money-bill-wave hugeicons-2x"></i>
            </div>
            <h4 class="gradient-text mb-3">Cargando...</h4>
            <div class="progress mt-3" style="height: 4px; width: 200px;">
                <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: 100%"></div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <div class="row justify-content-center align-items-center min-vh-100">
            <div class="col-md-8 col-lg-6">
                <!-- Logo -->
                <div class="text-center mb-4">
                    <div class="story-circle mx-auto mb-3" style="width: 100px; height: 100px;">
                        <i class="hugeicons hugeicons-money-bill-wave hugeicons-3x"></i>
                    </div>
                    <h1 class="gradient-text">RedCajeros</h1>
                    <p class="text-muted">Comienza tu prueba gratuita de 7 días</p>
                </div>

                <!-- Register Card -->
                <div class="ig-card fade-in">
                    <div class="ig-card-header text-center">
                        <h4 class="gradient-text mb-0">Crear Cuenta</h4>
                        <small class="text-muted">Comienza en menos de 1 minuto</small>
                    </div>
                    <div class="ig-card-body">
                        <!-- Alert Container -->
                        <div id="authAlertContainer" class="mb-3"></div>
                        
                        <!-- Register Form -->
                        <form id="registerForm" onsubmit="return register(event)">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label text-muted">
                                        <i class="hugeicons hugeicons-user me-2"></i>Nombre Completo
                                    </label>
                                    <input type="text" id="registerNombre" class="form-control form-control-ig" 
                                           placeholder="Juan Pérez" required autocomplete="off">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label text-muted">
                                        <i class="hugeicons hugeicons-envelope me-2"></i>Email
                                    </label>
                                    <input type="email" id="registerEmail" class="form-control form-control-ig" 
                                           placeholder="tu@email.com" required autocomplete="off">
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label text-muted">
                                        <i class="hugeicons hugeicons-phone me-2"></i>Teléfono (WhatsApp)
                                    </label>
                                    <input type="text" id="registerTelefono" class="form-control form-control-ig" 
                                           placeholder="0412-1234567" autocomplete="off">
                                    <small class="text-muted">Opcional, para notificaciones</small>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label text-muted">
                                        <i class="hugeicons hugeicons-lock me-2"></i>Contraseña
                                    </label>
                                    <input type="password" id="registerPassword" class="form-control form-control-ig" 
                                           placeholder="•••••••• (mínimo 6 caracteres)" required>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="acceptTerms" required>
                                    <label class="form-check-label text-muted" for="acceptTerms">
                                        Acepto los 
                                        <a href="#" onclick="mostrarTerminos()" class="text-info">términos y condiciones</a>
                                        y la 
                                        <a href="#" onclick="mostrarPrivacidad()" class="text-info">política de privacidad</a>
                                    </label>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-ig w-100 hover-lift mb-3">
                                <i class="hugeicons hugeicons-rocket me-2"></i> Comenzar Prueba Gratis
                            </button>
                        </form>
                        
                        <hr class="my-4">
                        
                        <!-- Login Link -->
                        <div class="text-center">
                            <p class="text-muted mb-2">¿Ya tienes cuenta?</p>
                            <a href="/login" class="btn btn-ig-outline w-100 hover-lift">
                                <i class="hugeicons hugeicons-sign-in-alt me-2"></i> Iniciar Sesión
                            </a>
                        </div>
                    </div>
                    <div class="ig-card-footer">
                        <div class="row text-center">
                            <div class="col-4">
                                <small class="text-success">
                                    <i class="hugeicons hugeicons-check-circle"></i> 7 días gratis
                                </small>
                            </div>
                            <div class="col-4">
                                <small class="text-info">
                                    <i class="hugeicons hugeicons-check-circle"></i> Sin tarjeta
                                </small>
                            </div>
                            <div class="col-4">
                                <small class="text-warning">
                                    <i class="hugeicons hugeicons-check-circle"></i> Cancelar cuando quieras
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Features List -->
                <div class="mt-4">
                    <h6 class="text-center gradient-text mb-3">¿Qué incluye la prueba?</h6>
                    <div class="row g-2">
                        <div class="col-6">
                            <div class="feature-item">
                                <i class="hugeicons hugeicons-check text-success me-2"></i>
                                <small>Hasta 10 cajeros</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="feature-item">
                                <i class="hugeicons hugeicons-check text-success me-2"></i>
                                <small>Cargas ilimitadas</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="feature-item">
                                <i class="hugeicons hugeicons-check text-success me-2"></i>
                                <small>Reportes PDF</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="feature-item">
                                <i class="hugeicons hugeicons-check text-success me-2"></i>
                                <small>Soporte por WhatsApp</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Footer -->
                <div class="text-center mt-4">
                    <small class="text-muted">
                        © 2024 RedCajeros • 
                        <a href="/login" class="text-muted">Iniciar Sesión</a> • 
                        <a href="#" onclick="mostrarAyuda()" class="text-muted">Ayuda</a>
                    </small>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Nuestro JavaScript -->
    <script src="{{ url_for('static', filename='js/auth.js') }}"></script>
    
    <script>
        // Mostrar términos
        async function mostrarTerminos() {
            let precioLite = '10000';
            let planLite = 'Lite';
            try {
                if (window.obtenerPlanesPublicos) {
                    const planes = await window.obtenerPlanesPublicos();
                    if (planes && planes.lite) {
                        precioLite = Number(planes.lite.precio).toFixed(2);
                        planLite = planes.lite.nombre || 'Lite';
                    }
                }
            } catch (error) {
                console.error('Error cargando planes:', error);
            }
            alert(`Términos de servicio:\n\n1. Prueba gratuita de 7 días\n2. Después: $${precioLite}/mes (Plan ${planLite})\n3. Puedes cancelar cuando quieras\n4. Tus datos están seguros`);
        }
        
        function mostrarPrivacidad() {
            alert("Política de privacidad:\n\n1. No compartimos tus datos\n2. Usamos encriptación\n3. Puedes eliminar tu cuenta cuando quieras");
        }
        
        function mostrarAyuda() {
            alert("¿Necesitas ayuda?\n\nSoporte por WhatsApp: +58 412-1234567\nEmail: soporte@redcajeros.com");
        }
        
        // Auto-focus en nombre
        document.addEventListener('DOMContentLoaded', function() {
            // Si ya hay sesión en localStorage, no debería estar aquí
            if (localStorage.getItem('redcajeros_user')) {
                window.location.href = '/dashboard';
            }
        });
    </script>
</body>
</html>
