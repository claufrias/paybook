<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RedCajeros - Panel Admin</title>
    
    <!-- Bootstrap 5 Dark -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-dark-5@1.1.3/dist/css/bootstrap-night.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Nuestro CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="story-circle mb-4 pulse" style="width: 80px; height: 80px; border: none;">
                <i class="fas fa-user-shield fa-2x"></i>
            </div>
            <h4 class="gradient-text mb-3">Cargando...</h4>
            <p class="text-muted">Por favor espere</p>
            <div class="progress mt-3" style="height: 4px; width: 200px;">
                <div class="progress-bar progress-bar-striped progress-bar-animated" 
                     style="width: 100%"></div>
            </div>
        </div>
    </div>

    <!-- Top Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top" style="background: rgba(15, 15, 15, 0.95); backdrop-filter: blur(20px); border-bottom: 1px solid var(--dark-border);">
        <div class="container-fluid">
            <!-- Logo -->
            <a class="navbar-brand" href="/admin">
                <div class="d-flex align-items-center">
                    <div class="story-circle small me-3" style="background: linear-gradient(45deg, #dc3545, #ff6b6b);">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div>
                        <h4 class="gradient-text mb-0">RedCajeros</h4>
                        <small class="text-muted">Panel Administrativo</small>
                    </div>
                </div>
            </a>
            
            <!-- Admin Menu -->
            <div class="dropdown">
                <button class="btn btn-ig-outline dropdown-toggle" type="button" data-bs-toggle="dropdown">
                    <div class="story-circle small me-2" style="background: linear-gradient(45deg, #dc3545, #ff6b6b);">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    Administrador
                </button>
                <ul class="dropdown-menu dropdown-menu-dark border-gradient">
                    <li class="dropdown-item disabled">
                        <small class="text-muted">admin@redcajeros.com</small>
                    </li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#" onclick="cargarPagosPendientesAdmin()">
                        <i class="fas fa-sync-alt me-2"></i> Actualizar
                    </a></li>
                    <li><a class="dropdown-item" href="/dashboard">
                        <i class="fas fa-tachometer-alt me-2"></i> Ir al Dashboard
                    </a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item text-danger" href="#" onclick="logout()">
                        <i class="fas fa-sign-out-alt me-2"></i> Cerrar Sesión
                    </a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container py-4 admin-panel">
        <!-- Alert Container -->
        <div id="alertContainer" class="mb-3"></div>
        
        <!-- Admin Header -->
        <div class="admin-header">
            <div>
                <h1 class="gradient-text mb-2">Panel Administrativo</h1>
                <p class="text-muted mb-0">Gestión de usuarios y pagos manuales</p>
            </div>
            <div>
                <button class="btn btn-ig" onclick="cargarPagosPendientesAdmin()">
                    <i class="fas fa-sync-alt me-2"></i> Actualizar
                </button>
            </div>
        </div>
        
        <!-- Admin Stats -->
        <div class="admin-stats-grid">
            <div class="admin-stat-card">
                <div class="admin-stat-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="admin-stat-value" id="adminTotalUsuarios">0</div>
                <div class="admin-stat-label">Usuarios Totales</div>
            </div>
            
            <div class="admin-stat-card">
                <div class="admin-stat-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="admin-stat-value" id="adminPagosPendientes">0</div>
                <div class="admin-stat-label">Pagos Pendientes</div>
            </div>
            
            <div class="admin-stat-card">
                <div class="admin-stat-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="admin-stat-value" id="adminPagosVerificados">0</div>
                <div class="admin-stat-label">Pagos Verificados</div>
            </div>
            
            <div class="admin-stat-card">
                <div class="admin-stat-icon">
                    <i class="fas fa-money-bill-wave"></i>
                </div>
                <div class="admin-stat-value" id="adminIngresos">$0</div>
                <div class="admin-stat-label">Ingresos Totales</div>
            </div>
        </div>
        
        <!-- Tabs -->
        <ul class="nav nav-tabs mb-4" id="adminTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="pagos-tab" data-bs-toggle="tab" data-bs-target="#pagos" type="button" role="tab">
                    <i class="fas fa-credit-card me-2"></i> Pagos Pendientes
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="usuarios-tab" data-bs-toggle="tab" data-bs-target="#usuarios" type="button" role="tab">
                    <i class="fas fa-users me-2"></i> Todos los Usuarios
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="config-tab" data-bs-toggle="tab" data-bs-target="#config" type="button" role="tab">
                    <i class="fas fa-cog me-2"></i> Configuración
                </button>
            </li>
        </ul>
        
        <!-- Tab Content -->
        <div class="tab-content" id="adminTabContent">
            <!-- Pagos Pendientes Tab -->
            <div class="tab-pane fade show active" id="pagos" role="tabpanel">
                <div class="ig-card">
                    <div class="ig-card-header d-flex justify-content-between align-items-center">
                        <div>
                            <h5 class="mb-0 gradient-text">Pagos Pendientes de Verificación</h5>
                            <small class="text-muted">Usuarios que enviaron comprobantes</small>
                        </div>
                        <div>
                            <span class="badge bg-warning" id="contadorPagosPendientes">0 pendientes</span>
                        </div>
                    </div>
                    <div class="ig-card-body">
                        <div class="table-responsive">
                            <table class="table table-ig table-hover">
                                <thead>
                                    <tr>
                                        <th>Código</th>
                                        <th>Usuario</th>
                                        <th>Teléfono</th>
                                        <th class="text-end">Monto</th>
                                        <th>Plan</th>
                                        <th>Fecha</th>
                                        <th>Estado</th>
                                        <th class="text-center">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tablaPagosPendientes">
                                    <tr>
                                        <td colspan="8" class="text-center text-muted py-5">
                                            <div class="mb-3">
                                                <i class="fas fa-spinner fa-spin fa-2x"></i>
                                            </div>
                                            <h6>Cargando pagos pendientes...</h6>
                                            <small class="text-muted">Por favor espere</small>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Usuarios Tab -->
            <div class="tab-pane fade" id="usuarios" role="tabpanel">
                <div class="ig-card">
                    <div class="ig-card-header">
                        <h5 class="mb-0 gradient-text">Todos los Usuarios Registrados</h5>
                        <small class="text-muted">Gestión completa de usuarios</small>
                    </div>
                    <div class="ig-card-body">
                        <div class="mb-3">
                            <div class="input-group">
                                <input type="text" id="buscarUsuario" class="form-control form-control-ig" 
                                       placeholder="Buscar por nombre o email...">
                                <button class="btn btn-ig-outline" onclick="buscarUsuarios()">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-ig table-hover">
                                <thead>
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Email</th>
                                        <th>Teléfono</th>
                                        <th>Plan</th>
                                        <th>Expiración</th>
                                        <th>Estado</th>
                                        <th class="text-center">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tablaUsuarios">
                                    <tr>
                                        <td colspan="7" class="text-center text-muted py-5">
                                            <div class="mb-3">
                                                <i class="fas fa-spinner fa-spin fa-2x"></i>
                                            </div>
                                            <h6>Cargando usuarios...</h6>
                                            <small class="text-muted">Por favor espere</small>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Configuración Tab -->
            <div class="tab-pane fade" id="config" role="tabpanel">
                <div class="row">
                    <div class="col-md-6">
                        <div class="ig-card mb-4">
                            <div class="ig-card-header">
                                <h5 class="mb-0 gradient-text">Configuración del Sistema</h5>
                                <small class="text-muted">Ajustes generales</small>
                            </div>
                            <div class="ig-card-body">
                                <div class="mb-3">
                                    <label class="form-label text-muted">WhatsApp Admin</label>
                                    <input type="text" id="configWhatsapp" class="form-control form-control-ig" 
                                           placeholder="584241234567">
                                    <small class="text-muted">Tu número para recibir comprobantes</small>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label text-muted">Banco - Nombre</label>
                                    <input type="text" id="configBancoNombre" class="form-control form-control-ig" 
                                           placeholder="Ej: Mercantil">
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label text-muted">Banco - Cuenta</label>
                                    <input type="text" id="configBancoCuenta" class="form-control form-control-ig" 
                                           placeholder="0105-1234-5678-9012">
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label text-muted">Banco - Titular</label>
                                    <input type="text" id="configBancoTitular" class="form-control form-control-ig" 
                                           placeholder="Tu Nombre">
                                </div>
                                
                                <button class="btn btn-ig w-100" onclick="guardarConfiguracion()">
                                    <i class="fas fa-save me-2"></i> Guardar Configuración
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="ig-card mb-4">
                            <div class="ig-card-header">
                                <h5 class="mb-0 gradient-text">Precios de Planes</h5>
                                <small class="text-muted">Actualizar precios mensuales</small>
                            </div>
                            <div class="ig-card-body">
                                <div class="mb-3">
                                    <label class="form-label text-muted">Plan Básico ($)</label>
                                    <input type="number" step="0.01" id="configPrecioBasico" 
                                           class="form-control form-control-ig" value="9.99">
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label text-muted">Plan Premium ($)</label>
                                    <input type="number" step="0.01" id="configPrecioPremium" 
                                           class="form-control form-control-ig" value="19.99">
                                </div>
                                
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i>
                                    Los cambios en precios solo afectan a nuevos pagos
                                </div>
                            </div>
                        </div>
                        
                        <div class="ig-card">
                            <div class="ig-card-header">
                                <h5 class="mb-0 gradient-text">Herramientas del Sistema</h5>
                            </div>
                            <div class="ig-card-body">
                                <div class="d-grid gap-2">
                                    <button class="btn btn-outline-info" onclick="exportarBackup()">
                                        <i class="fas fa-database me-2"></i> Exportar Backup
                                    </button>
                                    <button class="btn btn-outline-warning" onclick="limpiarCache()">
                                        <i class="fas fa-broom me-2"></i> Limpiar Cache
                                    </button>
                                    <button class="btn btn-outline-danger" onclick="reiniciarSistema()">
                                        <i class="fas fa-redo me-2"></i> Reiniciar Sistema
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="py-3 mt-5 border-top border-dark">
        <div class="container text-center">
            <small class="text-muted">
                <i class="fas fa-server me-1"></i> RedCajeros Admin v3.0 | 
                <i class="fas fa-shield-alt ms-3 me-1"></i> Modo Administrador |
                <i class="fas fa-clock ms-3 me-1"></i> ${new Date().toLocaleTimeString()}
            </small>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Nuestro JavaScript -->
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    
    <script>
        let pagosPendientes = [];
        let todosUsuarios = [];
        
        // Cargar datos del panel admin
        async function cargarPanelAdmin() {
            mostrarLoading(true);
            
            try {
                // Cargar pagos pendientes
                const responsePagos = await fetch(`${API_BASE}/api/admin/pagos/pendientes`);
                const dataPagos = await responsePagos.json();
                
                if (dataPagos.success) {
                    pagosPendientes = dataPagos.data;
                    actualizarTablaPagosPendientes();
                    actualizarEstadisticasAdmin();
                }
                
                // Cargar usuarios (simulado por ahora)
                // En una implementación real, harías otra API call
                setTimeout(() => {
                    // Simular carga de usuarios
                    todosUsuarios = [
                        {
                            id: 1,
                            nombre: 'Administrador',
                            email: 'admin@redcajeros.com',
                            telefono: '584241234567',
                            plan: 'premium',
                            expiracion: '2026-12-31 23:59:59',
                            activo: true
                        }
                    ];
                    actualizarTablaUsuarios();
                    mostrarLoading(false);
                }, 1000);
                
            } catch (error) {
                console.error('Error cargando panel admin:', error);
                mostrarAlerta('Error', 'No se pudieron cargar los datos', 'error');
                mostrarLoading(false);
            }
        }
        
        function actualizarTablaPagosPendientes() {
            const tbody = document.getElementById('tablaPagosPendientes');
            if (!tbody) return;
            
            if (pagosPendientes.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" class="text-center text-muted py-5">
                            <div class="mb-3">
                                <i class="fas fa-check-circle fa-3x text-success"></i>
                            </div>
                            <h6>¡Todo al día!</h6>
                            <small class="text-muted">No hay pagos pendientes de verificación</small>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = '';
            
            pagosPendientes.forEach(pago => {
                const fecha = new Date(pago.fecha_solicitud);
                const fechaFormateada = fecha.toLocaleDateString('es-ES', {
                    day: '2-digit',
                    month: 'short',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                const tr = document.createElement('tr');
                tr.className = 'payment-row';
                tr.innerHTML = `
                    <td>
                        <code class="fw-bold">${pago.codigo}</code>
                    </td>
                    <td>
                        <div>
                            <div class="fw-medium">${pago.usuario_nombre || 'Sin nombre'}</div>
                            <small class="text-muted">${pago.usuario_email}</small>
                        </div>
                    </td>
                    <td>
                        ${pago.usuario_telefono ? `
                        <a href="https://wa.me/${pago.usuario_telefono}" target="_blank" class="text-info">
                            <i class="fab fa-whatsapp me-1"></i>${pago.usuario_telefono}
                        </a>
                        ` : '<span class="text-muted">Sin teléfono</span>'}
                    </td>
                    <td class="text-end fw-bold">$${parseFloat(pago.monto).toFixed(2)}</td>
                    <td>
                        <span class="badge ${pago.plan === 'premium' ? 'badge-premium' : 'badge-basic'}">
                            ${pago.plan}
                        </span>
                    </td>
                    <td>
                        <small class="text-muted">${fechaFormateada}</small>
                    </td>
                    <td>
                        <span class="payment-status-badge payment-status-pendiente">
                            ${pago.estado}
                        </span>
                    </td>
                    <td class="text-center">
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-success" onclick="verificarPagoAdmin('${pago.codigo}')" 
                                    title="Verificar pago">
                                <i class="fas fa-check"></i>
                            </button>
                            <button class="btn btn-danger" onclick="rechazarPagoAdmin('${pago.codigo}')" 
                                    title="Rechazar pago">
                                <i class="fas fa-times"></i>
                            </button>
                            <button class="btn btn-info" onclick="contactarUsuario('${pago.usuario_email}', '${pago.usuario_telefono}')" 
                                    title="Contactar usuario">
                                <i class="fas fa-envelope"></i>
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(tr);
            });
            
            // Actualizar contador
            const contador = document.getElementById('contadorPagosPendientes');
            if (contador) {
                contador.textContent = `${pagosPendientes.length} pendientes`;
                contador.className = pagosPendientes.length > 0 ? 'badge bg-warning' : 'badge bg-success';
            }
        }
        
        function actualizarTablaUsuarios() {
            const tbody = document.getElementById('tablaUsuarios');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            todosUsuarios.forEach(usuario => {
                const expiracion = new Date(usuario.expiracion);
                const ahora = new Date();
                const diasRestantes = Math.ceil((expiracion - ahora) / (1000 * 60 * 60 * 24));
                
                let estadoBadge = 'bg-success';
                let estadoText = 'Activo';
                
                if (!usuario.activo) {
                    estadoBadge = 'bg-secondary';
                    estadoText = 'Inactivo';
                } else if (diasRestantes < 0) {
                    estadoBadge = 'bg-danger';
                    estadoText = 'Expirado';
                } else if (diasRestantes <= 3) {
                    estadoBadge = 'bg-warning';
                    estadoText = 'Por expirar';
                }
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${usuario.nombre}</td>
                    <td>
                        <div>${usuario.email}</div>
                        <small class="text-muted">ID: ${usuario.id}</small>
                    </td>
                    <td>${usuario.telefono || '<span class="text-muted">N/A</span>'}</td>
                    <td>
                        <span class="badge ${usuario.plan === 'premium' ? 'badge-premium' : usuario.plan === 'basic' ? 'badge-basic' : 'badge-trial'}">
                            ${usuario.plan}
                        </span>
                    </td>
                    <td>
                        <div>${expiracion.toLocaleDateString('es-ES')}</div>
                        <small class="text-muted">${diasRestantes > 0 ? `${diasRestantes} días` : 'Expirado'}</small>
                    </td>
                    <td>
                        <span class="badge ${estadoBadge}">${estadoText}</span>
                    </td>
                    <td class="text-center">
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-primary" onclick="editarUsuario(${usuario.id})" 
                                    title="Editar usuario">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-outline-${usuario.activo ? 'warning' : 'success'}" 
                                    onclick="${usuario.activo ? `desactivarUsuario(${usuario.id})` : `activarUsuario(${usuario.id})`}" 
                                    title="${usuario.activo ? 'Desactivar' : 'Activar'}">
                                <i class="fas fa-user-${usuario.activo ? 'slash' : 'check'}"></i>
                            </button>
                            <button class="btn btn-outline-info" onclick="verDetallesUsuario(${usuario.id})" 
                                    title="Ver detalles">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        function actualizarEstadisticasAdmin() {
            // Total usuarios
            document.getElementById('adminTotalUsuarios').textContent = todosUsuarios.length;
            
            // Pagos pendientes
            document.getElementById('adminPagosPendientes').textContent = pagosPendientes.length;
            
            // Pagos verificados (simulado)
            document.getElementById('adminPagosVerificados').textContent = '0';
            
            // Ingresos totales (simulado)
            const ingresos = pagosPendientes.reduce((sum, pago) => sum + parseFloat(pago.monto), 0);
            document.getElementById('adminIngresos').textContent = `$${ingresos.toFixed(2)}`;
        }
        
        function cargarPagosPendientesAdmin() {
            cargarPanelAdmin();
            mostrarAlerta('Actualizando', 'Recargando datos del panel...', 'info');
        }
        
        function buscarUsuarios() {
            const termino = document.getElementById('buscarUsuario').value.toLowerCase();
            // Filtrar usuarios localmente
            // En una implementación real, harías una búsqueda en el backend
            alert(`Buscando: ${termino}\n\nEn una implementación completa, esto buscaría en la base de datos.`);
        }
        
        function contactarUsuario(email, telefono) {
            let mensaje = `Contactar usuario:\n\nEmail: ${email}`;
            if (telefono) {
                mensaje += `\nTeléfono: ${telefono}`;
                mensaje += `\n\n¿Qué deseas hacer?\n1. Enviar email\n2. Llamar/WhatsApp\n3. Ver historial`;
            }
            alert(mensaje);
        }
        
        function editarUsuario(id) {
            alert(`Editar usuario ID: ${id}\n\nEn una implementación completa, esto abriría un formulario de edición.`);
        }
        
        function desactivarUsuario(id) {
            if (confirm('¿Desactivar este usuario?\n\nEl usuario no podrá acceder al sistema hasta que sea reactivado.')) {
                alert(`Usuario ${id} desactivado (simulado)`);
            }
        }
        
        function activarUsuario(id) {
            alert(`Usuario ${id} activado (simulado)`);
        }
        
        function verDetallesUsuario(id) {
            alert(`Detalles usuario ID: ${id}\n\nEn una implementación completa, esto mostraría el historial completo del usuario.`);
        }
        
        async function guardarConfiguracion() {
            const config = {
                whatsapp_admin: document.getElementById('configWhatsapp').value,
                banco_nombre: document.getElementById('configBancoNombre').value,
                banco_cuenta: document.getElementById('configBancoCuenta').value,
                banco_titular: document.getElementById('configBancoTitular').value,
                precio_basico: document.getElementById('configPrecioBasico').value,
                precio_premium: document.getElementById('configPrecioPremium').value
            };
            
            mostrarLoading(true);
            
            try {
                // En una implementación real, enviarías esto al backend
                setTimeout(() => {
                    mostrarAlerta('Configuración guardada', 'Los cambios se aplicaron correctamente', 'success');
                    mostrarLoading(false);
                }, 1000);
            } catch (error) {
                mostrarAlerta('Error', 'No se pudo guardar la configuración', 'error');
                mostrarLoading(false);
            }
        }
        
        function exportarBackup() {
            alert('Exportando backup de la base de datos...\n\nEn una implementación real, esto descargaría un archivo SQL.');
        }
        
        function limpiarCache() {
            if (confirm('¿Limpiar caché del sistema?\n\nEsto puede mejorar el rendimiento.')) {
                mostrarAlerta('Cache limpiado', 'El caché del sistema ha sido limpiado', 'success');
            }
        }
        
        function reiniciarSistema() {
            if (confirm('⚠️ ¿REINICIAR SISTEMA?\n\nEsta acción reiniciará todos los servicios.\n¿Estás seguro?')) {
                mostrarAlerta('Sistema reiniciando', 'El sistema se está reiniciando...', 'warning');
                setTimeout(() => {
                    location.reload();
                }, 2000);
            }
        }
        
        // Cargar datos al iniciar
        document.addEventListener('DOMContentLoaded', function() {
            cargarPanelAdmin();
            
            // Verificar que sea admin
            const userData = localStorage.getItem('user');
            if (userData) {
                const usuario = JSON.parse(userData);
                if (usuario.email !== 'admin@redcajeros.com') {
                    window.location.href = '/dashboard';
                }
            } else {
                window.location.href = '/login';
            }
        });
    </script>
</body>
</html>